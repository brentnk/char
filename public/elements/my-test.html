<polymer-element name='my-test'>
  <template>
    <char-socket id='socket' socket={{socket}}></char-socket>
    <style>
      #area {
        background: #222;
        border: 3px;
      }
    </style>
    <div id='area' fit>

    </div>
  </template>
  <script>
  Polymer({
    ready: function() {
      var sel = d3.select(this.$.area);
      var cScale =  d3.scale.linear().domain([3,12,15]).range([1,1.25,1.5]);
      console.log(cScale);
      console.log(sel);
      this.socket.on('es:query', this.handleES.bind(this));
      this.testEsQuery();
    },
    handleES: function(data) {
      this.esData = data.hits.hits;
      this.esData.speakers = _.uniq(_.map(this.esData,function(a) {return a['_source'].from}));
    },
    testEsQuery: function() {
      var data = {
        index: 'irc',
        type: 'ircmsg'
      };

      this.socket.emit('es:query', data);
    }
  });
  </script>
</polymer-element>
